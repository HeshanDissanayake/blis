#include "blis.h"

void bli_dgemm_regsw_16x16
     (
             dim_t      m,
             dim_t      n,
             dim_t      k,
       const void*      alpha,
       const void*      a,
       const void*      b,
       const void*      beta,
             void*      c, inc_t rs_c, inc_t cs_c,
       const auxinfo_t* data,
       const cntx_t*    cntx
     )
{


      const double* A = (const double*)a;
      const double* B = (const double*)b;
      double*       C = (double*)c;

	const inc_t rs_a   = bli_cntx_get_blksz_def_dt( BLIS_DOUBLE, BLIS_BBM, cntx ); 
	const inc_t cs_a   = bli_cntx_get_blksz_max_dt( BLIS_DOUBLE, BLIS_MR, cntx ); 

	const inc_t rs_b   = bli_cntx_get_blksz_max_dt( BLIS_DOUBLE, BLIS_NR, cntx ); 
	const inc_t cs_b   = bli_cntx_get_blksz_def_dt( BLIS_DOUBLE, BLIS_BBN, cntx ); 


//  printf("in kernle: m=%lu n=%lu k=%lu | alpha=%lf beta=%lf | A=%p B=%p C=%p | rs_a=%ld cs_a=%ld | rs_b=%ld cs_b=%ld |  rs_c=%ld cs_c=%ld | \n",
//        (unsigned long)m,
//        (unsigned long)n,
//        (unsigned long)k,
//        *(const double*)alpha,
//        a,
//        b,
//        *(const double*)beta,
//        c,
//        (long)rs_a,
//        (long)cs_a,
//        (long)rs_b,
//        (long)cs_b,
//        (long)rs_c,
//        (long)cs_c);

      // printf("\n--- A tile (m x k) REAL layout ---\n");
      // for (dim_t i = 0; i < m; ++i)
      // {
      // for (dim_t j = 0; j < k; ++j)
      // {
      //       printf("%8.4lf ", A[i * rs_a + j * cs_a]);
      // }
      // printf("\n");
      // }



      // // ---- B tile ----
      // printf("\n--- B tile (k x n) REAL layout ---\n");
      // for (dim_t i = 0; i < k; ++i)
      // {
      // for (dim_t j = 0; j < n; ++j)
      // {
      //       printf("%8.4lf ", B[i * rs_b + j * cs_b]);
      // }
      // printf("\n");
      // }  
 __asm__ volatile ( 
"regsw_c x0, 0(x0)\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"
"fmv.d.x  f29, x0\n"

             :
             :
             : 
             );


 


         for (int ik = 0; ik < k; ik++) {
                double *a = A+ik*cs_a;
                double *b = B+ik*rs_b;

            // printf("A = %6.2f, %6.2f, %6.2f, %6.2f\n", a[0], a[1], a[2], a[3]);
            // printf("B = %6.2f, %6.2f, %6.2f, %6.2f\n\n", b[0], b[1], b[2], b[3]);

 __asm__ volatile ( 
"regsw_c x0, 0(x0)\n"
"regsw_c x0, 0(x0)\n"
"fld f28, 0(%1)\n"
"fld f28, 8(%1)\n"
"fld f28, 16(%1)\n"
"fld f28, 24(%1)\n"
"fld f28, 32(%1)\n"
"fld f28, 40(%1)\n"
"fld f28, 48(%1)\n"
"fld f28, 56(%1)\n"
"fld f28, 64(%1)\n"
"fld f28, 72(%1)\n"
"fld f28, 80(%1)\n"
"fld f28, 88(%1)\n"
"fld f28, 96(%1)\n"
"fld f28, 104(%1)\n"
"fld f28, 112(%1)\n"
"fld f28, 120(%1)\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 0(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f28, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 8(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 16(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 24(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 32(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 40(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 48(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 56(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 64(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 72(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 80(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 88(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 96(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 104(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 112(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"
"regsw_c x0, 0(x0)\n"
"fld f1, 120(%0)\n"
"fmul.d f2, f1, f28\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f4\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f5\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f6\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f7\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f8\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f9\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f10\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f11\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f12\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f13\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f14\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f15\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f16\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f17\n"
"fadd.d f29, f2, f29\n"
"fmul.d f2, f1, f18\n"
"fadd.d f29, f2, f29\n"

          
                    ::"r"(a), "r"(b):);
           
            }


 __asm__ volatile ( 
"regsw_c x0, 0(x0)\n"
"fsd f29, 0(%0)\n"
"fsd f29, 8(%0)\n"
"fsd f29, 16(%0)\n"
"fsd f29, 24(%0)\n"
"fsd f29, 32(%0)\n"
"fsd f29, 40(%0)\n"
"fsd f29, 48(%0)\n"
"fsd f29, 56(%0)\n"
"fsd f29, 0(%1)\n"
"fsd f29, 8(%1)\n"
"fsd f29, 16(%1)\n"
"fsd f29, 24(%1)\n"
"fsd f29, 32(%1)\n"
"fsd f29, 40(%1)\n"
"fsd f29, 48(%1)\n"
"fsd f29, 56(%1)\n"
"fsd f29, 0(%2)\n"
"fsd f29, 8(%2)\n"
"fsd f29, 16(%2)\n"
"fsd f29, 24(%2)\n"
"fsd f29, 32(%2)\n"
"fsd f29, 40(%2)\n"
"fsd f29, 48(%2)\n"
"fsd f29, 56(%2)\n"
"fsd f29, 0(%3)\n"
"fsd f29, 8(%3)\n"
"fsd f29, 16(%3)\n"
"fsd f29, 24(%3)\n"
"fsd f29, 32(%3)\n"
"fsd f29, 40(%3)\n"
"fsd f29, 48(%3)\n"
"fsd f29, 56(%3)\n"
"fsd f29, 0(%4)\n"
"fsd f29, 8(%4)\n"
"fsd f29, 16(%4)\n"
"fsd f29, 24(%4)\n"
"fsd f29, 32(%4)\n"
"fsd f29, 40(%4)\n"
"fsd f29, 48(%4)\n"
"fsd f29, 56(%4)\n"
"fsd f29, 0(%5)\n"
"fsd f29, 8(%5)\n"
"fsd f29, 16(%5)\n"
"fsd f29, 24(%5)\n"
"fsd f29, 32(%5)\n"
"fsd f29, 40(%5)\n"
"fsd f29, 48(%5)\n"
"fsd f29, 56(%5)\n"
"fsd f29, 0(%6)\n"
"fsd f29, 8(%6)\n"
"fsd f29, 16(%6)\n"
"fsd f29, 24(%6)\n"
"fsd f29, 32(%6)\n"
"fsd f29, 40(%6)\n"
"fsd f29, 48(%6)\n"
"fsd f29, 56(%6)\n"
"fsd f29, 0(%7)\n"
"fsd f29, 8(%7)\n"
"fsd f29, 16(%7)\n"
"fsd f29, 24(%7)\n"
"fsd f29, 32(%7)\n"
"fsd f29, 40(%7)\n"
"fsd f29, 48(%7)\n"
"fsd f29, 56(%7)\n"


             :
             :"r"(C),"r"(C+rs_c), "r"(C+rs_c*2), "r"(C+rs_c*3), "r"(C+rs_c*4), "r"(C+rs_c*5), "r"(C+rs_c*6),  "r"(C+rs_c*7)  
             : 
             );



      // for(int kk =0; kk < k; kk++){
      //       for (dim_t i=0; i<m; i++){
      //             for(dim_t j=0; j<n; j++){
      //                   C[i*rs_c + j*cs_c] += A[i*rs_a + kk*cs_a] * B[kk*rs_b + j*cs_b];
      //                   // printf("C[%d,%d] A:%8.4lf B:%8.4lf \n",i,j ,A[i*rs_a + kk*cs_a] , B[kk*rs_b + j*cs_b]);
      //             }
      //       }
      // }


      
}